import{p as s,r as l,b as d,a0 as n}from"./index-459497b8.js";const w=s("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z",key:"nb9nel"}]]),g=s("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),S=()=>{const[c,a]=l.useState(!1),{toast:o}=d();return{loading:c,createCheckoutSession:async(e,r="subscription")=>{a(!0);try{const{data:t,error:i}=await n.functions.invoke("stripe-checkout",{body:{price_id:e,mode:r,success_url:`${window.location.origin}/stripe/success?session_id={CHECKOUT_SESSION_ID}`,cancel_url:`${window.location.origin}/stripe/cancel?session_id={CHECKOUT_SESSION_ID}`}});if(i)throw i;if(t.url)window.location.href=t.url;else throw new Error("No checkout URL received")}catch(t){console.error("Error creating checkout session:",t),o({title:"Errore nel pagamento",description:t.message||"Impossibile avviare il processo di pagamento.",variant:"destructive"})}finally{a(!1)}},handlePaymentSuccess:()=>{o({title:"Pagamento completato! ðŸŽ‰",description:"Benvenuto in SardAI Premium! Il tuo abbonamento Ã¨ ora attivo."})},handlePaymentCanceled:()=>{o({title:"Pagamento annullato",description:"Il pagamento Ã¨ stato annullato. Puoi riprovare quando vuoi."})},redirectToStripePortal:async()=>{try{const{data:e,error:r}=await n.functions.invoke("stripe-portal",{body:{return_url:`${window.location.origin}/stripe/manage`}});if(r)throw r;e.url&&(window.location.href=e.url)}catch{o({title:"Errore",description:"Impossibile accedere al portale di gestione.",variant:"destructive"})}}}};export{w as G,g as H,S as u};
